name: Website

on:
  push:

 branches: ["main"]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:

 runs-on: ubuntu-latest

 steps:

  - name: Checkout

    uses: actions/checkout@v4

  - name: Setup Pages

    uses: actions/configure-pages@v5

  - name: Generate with _just

    uses: js-just/latest@main

    with: # Remove "with" and "path" here if you are not using compressor or generator modes!

      path: . # Root directory, or you can replace the dot with the path to your website/docs directory to be generated/compressed. (Only for compressor and generator modes)

  - name: Upload artifact

    uses: actions/upload-pages-artifact@v3

    with:

      path: . # Root directory, or you can replace the dot with the path to your entire website to be deployed to GitHub Pages.

  deploy:

 environment:

  name: github-pages

  url: ${{ steps.deployment.outputs.page_url }}

 runs-on: ubuntu-latest

 needs: build

 steps:

  - name: Deploy to GitHub Pages

    id: deployment

    uses: actions/deploy-pages@v4
